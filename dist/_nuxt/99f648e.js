(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{1528:function(e,t,n){"use strict";n.r(t);n(3),n(14),n(4),n(125),n(15),n(41),n(27),n(39);var o=n(1312),r=n(1554),c=n(1626),l=n(1527),h=n(1521),f=n(1246);function d(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function v(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(t){m(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function O(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?y(Object(source),!0).forEach((function(t){P(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):y(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(){var e=Object(c.b)(arguments),text=e.text,t=e.options,n=e.metadata,o=function(text,e,t){e&&e.defaultCountry&&!Object(f.c)(e.defaultCountry,t)&&(e=v(v({},e),{},{defaultCountry:void 0}));try{return Object(l.a)(text,e,t)}catch(e){if(!(e instanceof h.a))throw e}}(text,t=O(O({},t),{},{extract:!1}),n);return o&&o.isValid()||!1}function j(){return Object(r.a)(_,arguments)}var w=n(1897),x={props:{error:{type:[Boolean,String],default:!1},valid:{type:Boolean,default:!1},email:{type:String,default:"email"},phoneText:{type:String,default:"phone"},placeholder:{type:String,default:"Enter your email"},check:{type:Boolean,default:!1},content:{type:Object,default:{}}},data:function(){return{myInputModel:"",activeInput:"email",phone:o,activePhone:o[190],errorText:""}},created:function(){this.getLocation()},watch:{activeInput:function(){this.myInputModel=""},myInputModel:function(e){var t=this;if(this.errorText=!1,this.isValidate(e),"email"!==this.activeInput&&j(this.activePhone.code+e,this.activePhone.prefix))if(this.check){var form={value:Object(w.a)(this.activePhone.code+e).number.substring(1),field:"phone"};this.$axios.$get("/auth/check-exists",{params:form}).then((function(e){t.$emit("error",!!e.phone&&"existPhone"),t.errorText=!!e.phone&&"existPhone"})).finally((function(){return t.$emit("input","".concat(t.activePhone.code,"-").concat(e))}))}else this.$emit("input","".concat(this.activePhone.code,"-").concat(e));else if(this.check){var n={value:e,field:"email"};this.$axios.$get("/auth/check-exists",{params:n}).then((function(e){t.$emit("error",!!e.email&&"existEmail"),t.errorText=!!e.email&&"existEmail"})).finally((function(){return t.$emit("input",e)}))}else this.$emit("input",e)}},methods:{searchPhones:function(e){if(""===e)this.phone=o;else{var t=[];this.phone.forEach((function(n){var o=new RegExp(e,"gi");(o.test(n.name)||o.test(n.code))&&t.push(n)})),this.phone=t}},changeActivePhone:function(e){this.myInputModel="",this.activePhone=e},getLocation:function(){var e=this;this.$axios.$get("http://www.geoplugin.net/json.gp").then((function(t){var code=t.geoplugin_countryCode.toLowerCase();e.activePhone=e.phone.find((function(e){return e.prefix===code})),e.myInputModel=""}))},isValidate:function(e){"email"===this.activeInput?this.$emit("error",!this.$validateEmail(e)):this.$emit("error",!j(this.activePhone.code+e,this.activePhone.prefix))}}},k=n(13),component=Object(k.a)(x,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"check-field",class:[{error:e.error},{valid:e.valid}]},[t("div",{staticClass:"check-field__first"},[t("button-primary",{attrs:{white:"email"!==e.activeInput},nativeOn:{click:function(t){t.preventDefault(),e.activeInput="email"}}},[e._v(e._s(e.email))]),t("button-primary",{attrs:{white:"phone"!==e.activeInput},nativeOn:{click:function(t){t.preventDefault(),e.activeInput="phone"}}},[e._v(e._s(e.phoneText))])],1),"phone"===e.activeInput?[t("div",{staticClass:"check-field__content check-field__content-phone"},[t("form-select-lang",{staticClass:"favorites-ad__select",attrs:{lang:"",items:e.phone,value:e.activePhone,noBorder:""},on:{search:e.searchPhones,input:e.changeActivePhone},model:{value:e.activePhone,callback:function(t){e.activePhone=t},expression:"activePhone"}}),t("div",{staticClass:"check-field__phone"},[t("div",{staticClass:"check-field__phone-code"},[e._v(e._s(e.activePhone.code))]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.myInputModel,expression:"myInputModel"},{name:"mask",rawName:"v-mask",value:e.activePhone.phone,expression:"activePhone.phone"}],staticClass:"check-field__phone-input",attrs:{type:"tel",placeholder:e.activePhone.phone},domProps:{value:e.myInputModel},on:{input:function(t){t.target.composing||(e.myInputModel=t.target.value)}}})])],1)]:[t("div",{staticClass:"check-field__content"},[t("div",{staticClass:"check-field__email"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.myInputModel,expression:"myInputModel"}],staticClass:"check-field__phone-input",attrs:{type:"email",placeholder:e.placeholder},domProps:{value:e.myInputModel},on:{input:function(t){t.target.composing||(e.myInputModel=t.target.value)}}})])])],""!==e.errorText?t("div",{staticClass:"check-field__error color-red"},[e._v(e._s(e.content[e.errorText]))]):e._e()],2)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{ButtonPrimary:n(113).default,FormSelectLang:n(1311).default})}}]);